##《空洞骑士》中期报告

#1.技术难点

##1.1 内存管理
TextureUnmanaged类并没有自动的内存管理，需要手动调用`UnloadTexture(Texture2D)`方法来释放内存。
如果不手动释放内存，就会造成内存泄漏。我们在TextureUnmanaged类中重载了`=`运算符，使得TextureUnmanaged类可以直接赋值给Texture2D类，这样就可以在TextureUnmanaged类的生命周期结束时自动释放内存。

##1.2 Texture的赋值运算符
Raylib中，Texture类没有赋值运算符与拷贝构造函数，这使得我们无法直接将Texture类作为类成员，也无法将Texture类作为函数参数传递。而且不能成为vector的模板类。为了解决这个问题，我们使用了TextureUnmanaged类，这个类可以直接赋值给Texture类，而且在生命周期结束时会自动释放内存。

##1.3 raylib没有完整文档
raylib的文档并不完整，很多函数的参数并没有说明，只能通过查看源码来了解函数的具体功能。这使得我们在使用raylib时遇到了很多困难。
我们通过new bing，chatgpt，github copilot x等工具，并且向raylib-cpp的作者提出了issue，来解决这个问题。

#2.协作情况

- 杨煜卓：Model与ViewModel，底层移动/判定逻辑；
- - 完成main大体框架，角色与其他碰撞体的检测，移动系统，动画系统，正在编写怪物类
- 景官正：APP层，各层之间的协调与统合；
- - TODO
- 黄俊涛：View层，面对用户的显示与交互。
- - TODO

#3.部分效果图

![Fall](https://github.com/Matteotti/MyPicHost/blob/master/CppGameJam/KnightFall.png)
![Fall2](https://github.com/Matteotti/MyPicHost/blob/master/CppGameJam/KnightFall.png)
![Idle](https://github.com/Matteotti/MyPicHost/blob/master/CppGameJam/KnightFall.png)
![Walk](https://github.com/Matteotti/MyPicHost/blob/master/CppGameJam/KnightFall.png)


#4.总体心得

我们在这次项目中学习到了很多东西，包括raylib的使用，C++的面向对象编程，以及团队协作的方法。我们也遇到了很多问题，包括raylib的文档不完善，raylib的Texture类不能直接赋值，raylib的Texture类没有自动内存管理等等。我们通过查阅资料，向raylib-cpp的作者提出issue，使用TextureUnmanaged类等方法解决了这些问题。我们也通过这次项目学习到了很多团队协作的方法，包括使用github，使用discord，使用trello等等。我们也通过这次项目学习到了很多C++的面向对象编程的方法，包括使用类，使用继承，使用虚函数等等。我们也通过这次项目学习到了很多raylib的使用方法，包括使用Texture类，使用Vector2类，使用Rectangle类，使用raylib的动画系统等等。

#5.个人心得

杨煜卓：
我在这次项目中主要负责Model与ViewModel，底层移动/判定逻辑。我在这次项目中学习到了很多C++的面向对象编程的方法，让我对c++的理解更深刻了。